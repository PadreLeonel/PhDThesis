import os
import SCons
from os.path import join
from SCons.Scanner.C import CScanner

Import('env')
env = env.Clone()
env.Tool('RecursiveScanner')
env.Append(
	CCFLAGS= " -Wno-c++11-extensions",
	CPPPATH = Dir(env['common_dir']),
	LINKFLAGS = "-lpthread -lboost_system -lboost_thread -L%s -ldiag" % env['lib_dir'] )

target  = "sandbox"

wildcards = ""
headers = []
common_headers = []
sources = []

for i in range(4):
  wildcards = join(wildcards, "*")
  headers += env.Glob(wildcards + "h")
  sources += env.Glob(wildcards + "cpp")
  sources += env.Glob(join("..", "common", "src", wildcards + "cpp"))

obj = env.Program(target = target, source = sources)
env.Default(env.Install(env['bin_dir'], obj))
